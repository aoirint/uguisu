# 構想

## 検討事項

- プラグインの形態をとるとメンテナンスが大変
- サービス間のコメント仕様の差異の吸収

## コード基盤を共通化するにはどうしたらいいか？

要件

- モバイルを含むマルチプラットフォーム対応
- ネイティブで動くアプリケーション（非公式APIを利用する都合、CORS等の関係上）

不慣れだけれど、全部Dartで実装するしかないか...？

## アーキテクチャ

```mermaid
graph TD
  nicolive(ニコニコ生放送API)
  ytlive(YouTube Live API)
  uguisudb(Uguisu Comment Database)
  uguisucv(Uguisu Comment Viewer)
  uguisucg(Uguisu Comment Generator)
  uguisurd(Uguisu Comment Reader)
  voicevox_engine(VOICEVOX ENGINE)
  voicevox_core(VOICEVOX CORE)
  assistant_seika(Assistant Seika)
  bouyomi_chan(棒読みちゃん)
  obs(OBS Studio)
  nair(N Air)

  nicolive-->uguisudb
  ytlive-->uguisudb

  uguisudb-->uguisucv

  uguisudb-->uguisucg
  uguisucg-->obs
  uguisucg-->nair

  uguisudb-->uguisurd
  uguisurd-->voicevox_engine
  uguisurd-->voicevox_core
  uguisurd-->assistant_seika
  uguisurd-->bouyomi_chan
```

## コメントモデル

- 共通データ
  - コテハン
- ニコニコ動画
  - ユーザID
  - プロフィール名
  - 184
  - プレミアム会員
  - ギフト
  - ニコニ広告
  - エモーション
  - 来場者通知
  - 好きなものリスト登録
- YouTube
  - チャンネルID
  - チャンネル名
  - モデレータ
  - スーパーチャット
